<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Media & Link Manager</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
--primary: #6366f1;
--primary-dark: #4f46e5;
--secondary: #8b5cf6;
--accent: #ec4899;
--success: #10b981;
--danger: #ef4444;
--warning: #f59e0b;
--info: #3b82f6;
--dark: #1e293b;
--light: #f8fafc;
--gray: #6b7280;
--border-radius: 16px;
--transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}
body {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
min-height: 100vh;
font-family: 'Poppins', sans-serif;
color: var(--dark);
overflow-x: hidden;
position: relative;
}
/* Top-left Stat Badges */
.stat-badges {
position: fixed;
top: 15px;
left: 15px;
z-index: 1000;
display: flex;
gap: 8px;
}
.stat-badge {
background: rgba(255, 255, 255, 0.95);
backdrop-filter: blur(10px);
border-radius: 50px;
padding: 6px 14px;
font-size: 0.85rem;
font-weight: 600;
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
display: flex;
align-items: center;
gap: 6px;
border: 1px solid rgba(255,255,255,0.4);
}
.stat-badge i {
font-size: 1rem;
}
.stat-badge.total { color: var(--primary); }
.stat-badge.images { color: var(--success); }
.stat-badge.links { color: var(--info); }

.container {
max-width: 1400px;
margin: 0 auto;
padding: 20px;
margin-top: 60px;
}
/* Header Section - Title Only */
.header-section {
background: rgba(255, 255, 255, 0.95);
backdrop-filter: blur(10px);
border-radius: 20px;
padding: 40px;
margin-bottom: 40px;
box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
text-align: center;
border: 1px solid rgba(255, 255, 255, 0.3);
}
.header-title {
font-size: 3rem;
font-weight: 800;
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 15px;
letter-spacing: -0.5px;
}

/* Floating Action Button */
.fab-container {
position: fixed;
bottom: 40px;
right: 40px;
z-index: 1000;
}
.fab-btn {
width: 65px;
height: 65px;
border-radius: 50%;
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
color: white;
border: none;
box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
display: flex;
align-items: center;
justify-content: center;
font-size: 1.8rem;
cursor: pointer;
transition: var(--transition);
position: relative;
overflow: hidden;
}
.fab-btn::before {
content: '';
position: absolute;
top: 50%;
left: 50%;
width: 0;
height: 0;
border-radius: 50%;
background: rgba(255, 255, 255, 0.2);
transform: translate(-50%, -50%);
transition: width 0.6s, height 0.6s;
}
.fab-btn:hover::before {
width: 300px;
height: 300px;
}
.fab-btn:hover {
transform: scale(1.1) rotate(90deg);
box-shadow: 0 15px 40px rgba(99, 102, 241, 0.6);
}
.fab-btn:active {
transform: scale(0.95);
}
.fab-tooltip {
position: absolute;
bottom: 80px;
right: 0;
background: white;
color: var(--dark);
padding: 10px 20px;
border-radius: 30px;
font-weight: 600;
font-size: 0.95rem;
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
opacity: 0;
transform: translateY(15px);
transition: var(--transition);
white-space: nowrap;
z-index: 1001;
}
.fab-btn:hover .fab-tooltip {
opacity: 1;
transform: translateY(0);
}
/* Filter Tabs */
.filter-tabs {
background: rgba(255, 255, 255, 0.95);
backdrop-filter: blur(10px);
border-radius: 16px;
padding: 20px;
margin-bottom: 30px;
box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
border: 1px solid rgba(255, 255, 255, 0.3);
}
.tab-buttons {
display: flex;
gap: 15px;
justify-content: center;
flex-wrap: wrap;
}
.tab-btn {
padding: 12px 28px;
border-radius: 50px;
border: none;
background: #e2e8f0;
color: var(--gray);
font-weight: 600;
font-size: 1rem;
cursor: pointer;
transition: var(--transition);
display: flex;
align-items: center;
gap: 8px;
}
.tab-btn.active {
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
color: white;
box-shadow: 0 5px 20px rgba(99, 102, 241, 0.3);
transform: translateY(-2px);
}
.tab-btn:hover:not(.active) {
background: #cbd5e1;
transform: translateY(-2px);
}
.tab-btn i {
font-size: 1.1rem;
}

/* Search Input */
.search-container {
margin-top: 20px;
max-width: 500px;
margin-left: auto;
margin-right: auto;
}
.search-container input {
border-radius: 50px;
padding-left: 20px;
padding-right: 20px;
}

/* Grid Layout */
.media-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
gap: 25px;
padding: 10px;
}
@media (max-width: 768px) {
.media-grid {
grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
gap: 20px;
}
.header-section {
padding: 30px 20px;
}
.header-title {
font-size: 2.3rem;
}
.fab-container {
bottom: 30px;
right: 30px;
}
.fab-btn {
width: 55px;
height: 55px;
font-size: 1.5rem;
}
.stat-badges {
top: 10px;
left: 10px;
gap: 6px;
}
.stat-badge {
padding: 4px 10px;
font-size: 0.75rem;
}
}
@media (max-width: 480px) {
.media-grid {
grid-template-columns: 1fr;
gap: 18px;
}
.header-section {
padding: 25px 15px;
}
.header-title {
font-size: 2rem;
}
.tab-buttons {
flex-direction: column;
align-items: center;
}
.tab-btn {
width: 100%;
max-width: 300px;
}
.fab-container {
bottom: 25px;
right: 25px;
}
.fab-btn {
width: 50px;
height: 50px;
font-size: 1.3rem;
}
.fab-tooltip {
display: none;
}
.stat-badges {
display: none;
}
}

/* === IMAGE CARD: KEPT EXACTLY AS BEFORE === */
.image-card {
background: white;
border-radius: var(--border-radius);
overflow: hidden;
box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
transition: var(--transition);
cursor: pointer;
position: relative;
border: 2px solid transparent;
}
.image-card:hover {
transform: translateY(-10px) scale(1.02);
box-shadow: 0 15px 40px rgba(99, 102, 241, 0.25);
border-color: var(--primary);
z-index: 10;
}
.image-thumbnail {
width: 100%;
height: 200px;
object-fit: cover;
display: block;
transition: transform 0.5s ease;
background: linear-gradient(45deg, #f3f4f6, #e5e7eb);
}
.image-card:hover .image-thumbnail {
transform: scale(1.1);
}
.image-card-content {
padding: 20px;
}
.image-card-title {
font-size: 1.3rem;
font-weight: 700;
color: var(--dark);
margin-bottom: 10px;
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow: hidden;
}
.image-card-description {
color: var(--gray);
font-size: 0.95rem;
line-height: 1.6;
margin-bottom: 12px;
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow: hidden;
}
.image-card-footer {
display: flex;
justify-content: space-between;
align-items: center;
padding-top: 15px;
border-top: 1px solid #e5e7eb;
}
.image-card-meta {
display: flex;
align-items: center;
gap: 10px;
color: var(--gray);
font-size: 0.85rem;
}
.image-card-meta i {
color: var(--primary);
}
.image-card-actions {
display: flex;
gap: 8px;
}
.action-btn {
width: 36px;
height: 36px;
border-radius: 10px;
border: none;
background: #f3f4f6;
color: var(--gray);
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: var(--transition);
font-size: 0.9rem;
}
.action-btn:hover {
background: var(--primary);
color: white;
transform: translateY(-2px);
}

/* === LINK CARD: REDESIGNED TO HIGHLIGHT TITLE & DESCRIPTION === */
.link-card {
background: white;
border-radius: var(--border-radius);
overflow: hidden;
box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
transition: var(--transition);
cursor: pointer;
position: relative;
border: 2px solid transparent;
display: flex;
flex-direction: column;
}
.link-card:hover {
transform: translateY(-8px);
box-shadow: 0 12px 35px rgba(59, 130, 246, 0.25);
border-color: var(--info);
z-index: 10;
}
.link-card-thumb {
width: 100%;
height: 140px;
background: #f8fafc;
position: relative;
overflow: hidden;
}
.link-card-thumb img {
width: 100%;
height: 100%;
object-fit: cover;
}
.link-card-thumb .fallback-icon {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
font-size: 3rem;
color: var(--info);
display: none;
}
.link-card-content {
padding: 20px;
flex-grow: 1;
display: flex;
flex-direction: column;
}
.link-card-title {
font-size: 1.25rem;
font-weight: 700;
color: var(--dark);
margin-bottom: 10px;
line-height: 1.4;
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow: hidden;
}
.link-card-url {
color: var(--primary);
font-size: 0.9rem;
margin-bottom: 12px;
display: block;
word-break: break-all;
font-weight: 500;
text-decoration: none;
}
.link-card-description {
color: var(--gray);
font-size: 0.95rem;
line-height: 1.6;
margin-bottom: 15px;
flex-grow: 1;
display: -webkit-box;
-webkit-line-clamp: 3;
-webkit-box-orient: vertical;
overflow: hidden;
}
.link-card-footer {
display: flex;
justify-content: space-between;
align-items: center;
padding-top: 15px;
border-top: 1px solid #e5e7eb;
}
.link-card-meta {
display: flex;
align-items: center;
gap: 10px;
color: var(--gray);
font-size: 0.85rem;
}
.link-card-meta i {
color: var(--info);
}

/* Empty State */
.empty-state {
text-align: center;
padding: 80px 30px;
background: rgba(255, 255, 255, 0.9);
border-radius: 20px;
margin: 40px 0;
box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
}
.empty-icon {
font-size: 6rem;
color: #cbd5e1;
margin-bottom: 25px;
}
.empty-title {
font-size: 2.2rem;
font-weight: 700;
color: var(--dark);
margin-bottom: 15px;
}
.empty-subtitle {
color: var(--gray);
font-size: 1.15rem;
margin-bottom: 35px;
max-width: 600px;
margin-left: auto;
margin-right: auto;
line-height: 1.7;
}
.empty-btn {
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
color: white;
border: none;
padding: 16px 45px;
font-weight: 700;
font-size: 1.1rem;
border-radius: 50px;
box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
transition: var(--transition);
display: inline-flex;
align-items: center;
gap: 12px;
}
.empty-btn:hover {
transform: translateY(-3px);
box-shadow: 0 12px 35px rgba(99, 102, 241, 0.6);
}

/* Loading, Error, Modal styles */
.loading-container {
min-height: 500px;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
gap: 30px;
background: rgba(255, 255, 255, 0.9);
border-radius: 20px;
padding: 40px;
margin: 40px 0;
box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
}
.spinner-large {
width: 100px;
height: 100px;
border: 8px solid rgba(99, 102, 241, 0.2);
border-top: 8px solid var(--primary);
border-radius: 50%;
animation: spin 1s linear infinite;
}
.loading-text {
font-size: 2.2rem;
font-weight: 700;
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}
.loading-subtext {
color: var(--gray);
font-size: 1.2rem;
}
@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}
.error-container {
text-align: center;
padding: 70px 30px;
background: rgba(255, 255, 255, 0.9);
border-radius: 20px;
margin: 40px 0;
box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
}
.error-icon {
font-size: 6rem;
color: var(--danger);
margin-bottom: 25px;
}
.error-title {
font-size: 2.2rem;
font-weight: 700;
color: var(--danger);
margin-bottom: 18px;
}
.error-message {
color: var(--gray);
font-size: 1.1rem;
line-height: 1.7;
margin-bottom: 40px;
max-width: 700px;
margin-left: auto;
margin-right: auto;
}
.error-btns {
display: flex;
gap: 20px;
justify-content: center;
flex-wrap: wrap;
}
.error-btn {
padding: 14px 35px;
font-weight: 600;
font-size: 1rem;
border-radius: 50px;
transition: var(--transition);
border: none;
display: inline-flex;
align-items: center;
gap: 10px;
}
.btn-retry {
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
color: white;
box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
}
.btn-retry:hover {
transform: translateY(-3px);
box-shadow: 0 10px 30px rgba(99, 102, 241, 0.6);
}
.btn-guide {
background: white;
color: var(--primary);
border: 2px solid var(--primary);
}
.btn-guide:hover {
background: var(--primary);
color: white;
transform: translateY(-3px);
}
.image-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.94);
z-index: 2000;
justify-content: center;
align-items: center;
opacity: 0;
visibility: hidden;
transition: opacity 0.4s ease, visibility 0.4s ease;
padding: 20px;
pointer-events: none;
}
.image-modal.active {
opacity: 1;
visibility: visible;
pointer-events: all;
}
.image-modal-content {
max-width: 95%;
max-height: 90vh;
position: relative;
display: flex;
flex-direction: column;
align-items: center;
}
.image-modal-img {
max-width: 100%;
max-height: 85vh;
border-radius: 16px;
box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6);
object-fit: contain;
background: #1e293b;
border: 3px solid white;
}
.image-modal-close {
position: absolute;
top: -60px;
right: 0;
width: 60px;
height: 60px;
border-radius: 50%;
background: rgba(255, 255, 255, 0.92);
border: none;
color: var(--dark);
font-size: 1.8rem;
cursor: pointer;
transition: var(--transition);
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
z-index: 2001;
}
.image-modal-close:hover {
background: var(--primary);
color: white;
transform: rotate(90deg) scale(1.1);
}
.image-modal-info {
background: rgba(255, 255, 255, 0.92);
padding: 20px 30px;
border-radius: 16px;
color: var(--dark);
text-align: center;
max-width: 800px;
margin-top: 25px;
box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25);
}
.image-modal-title {
font-size: 1.8rem;
font-weight: 700;
margin-bottom: 10px;
color: var(--primary);
}
.image-modal-description {
font-size: 1.1rem;
color: var(--gray);
line-height: 1.7;
max-height: 200px;
overflow-y: auto;
padding-right: 10px;
}
.image-modal-description::-webkit-scrollbar {
width: 6px;
}
.image-modal-description::-webkit-scrollbar-track {
background: #f1f1f1;
border-radius: 10px;
}
.image-modal-description::-webkit-scrollbar-thumb {
background: var(--primary);
border-radius: 10px;
}
.modal-content {
border-radius: 24px;
border: none;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
overflow: hidden;
}
.modal-header {
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
color: white;
padding: 30px;
border-bottom: none;
}
.modal-title {
font-weight: 700;
font-size: 1.9rem;
display: flex;
align-items: center;
gap: 12px;
}
.modal-header .btn-close {
filter: invert(1) brightness(1.2);
width: 35px;
height: 35px;
opacity: 1;
margin: 0;
padding: 0;
}
.modal-body {
padding: 35px;
}
.form-label {
font-weight: 600;
color: var(--dark);
margin-bottom: 12px;
font-size: 1rem;
display: flex;
align-items: center;
gap: 10px;
}
.form-control, .form-select {
border: 2px solid #e5e7eb;
border-radius: 14px;
padding: 16px 20px;
font-size: 1.05rem;
transition: var(--transition);
background: #f9fafb;
font-family: 'Poppins', sans-serif;
}
.form-control:focus, .form-select:focus {
border-color: var(--primary);
box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.15);
background: white;
}
.url-preview {
margin-top: 15px;
padding: 14px;
background: #f3f4f6;
border-radius: 12px;
border-left: 4px solid var(--primary);
font-size: 0.95rem;
word-break: break-all;
display: none;
}
.url-preview.show {
display: block;
animation: fadeIn 0.5s ease;
}
@keyframes fadeIn {
from { opacity: 0; transform: scale(0.95); }
to { opacity: 1; transform: scale(1); }
}
.btn-submit {
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
color: white;
border: none;
padding: 18px;
font-weight: 700;
font-size: 1.1rem;
border-radius: 16px;
transition: var(--transition);
width: 100%;
box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
margin-top: 10px;
}
.btn-submit:hover {
transform: translateY(-3px);
box-shadow: 0 12px 35px rgba(99, 102, 241, 0.6);
color: white;
}
.btn-submit:disabled {
background: #9ca3af;
cursor: not-allowed;
transform: none;
box-shadow: none;
}
.status-alert {
margin-top: 20px;
border-radius: 14px;
padding: 18px 25px;
font-weight: 600;
display: none;
animation: slideDown 0.4s ease;
}
@keyframes slideDown {
from { transform: translateY(-30px); opacity: 0; }
to { transform: translateY(0); opacity: 1; }
}
.setup-guide {
background: #f9fafb;
border-radius: 12px;
padding: 25px;
margin-top: 20px;
border-left: 4px solid var(--primary);
}
.setup-guide h5 {
margin-bottom: 15px;
color: var(--dark);
}
.setup-guide ol {
line-height: 2;
padding-left: 20px;
color: var(--gray);
}
.setup-guide li {
margin-bottom: 12px;
}
.setup-guide code {
background: white;
padding: 3px 8px;
border-radius: 6px;
font-size: 0.9rem;
color: var(--primary);
border: 1px solid #e5e7eb;
}
</style>
</head>
<body>
<!-- Top-left Stat Badges -->
<div class="stat-badges">
  <div class="stat-badge total">
    <i class="fas fa-th-large"></i>
    <span id="badgeTotal">0</span>
  </div>
  <div class="stat-badge images">
    <i class="fas fa-image"></i>
    <span id="badgeImages">0</span>
  </div>
  <div class="stat-badge links">
    <i class="fas fa-link"></i>
    <span id="badgeLinks">0</span>
  </div>
</div>

<div class="container">
<!-- Header Section - Title Only -->
<div class="header-section">
<h1 class="header-title">
<i class="fas fa-images"></i> Media & Link Manager
</h1>
</div>

<!-- Filter Tabs -->
<div class="filter-tabs">
<div class="tab-buttons">
<button class="tab-btn active" data-filter="all">
<i class="fas fa-th-large"></i> All Items
</button>
<button class="tab-btn" data-filter="images">
<i class="fas fa-image"></i> Images Only
</button>
<button class="tab-btn" data-filter="links">
<i class="fas fa-link"></i> Links Only
</button>
</div>
<div class="search-container mt-3">
<input
type="text"
id="searchInput"
class="form-control"
placeholder="Search by URL, title, or description..."
/>
</div>
</div>

<!-- Loading State -->
<div class="loading-container" id="loadingSection">
<div class="spinner-large"></div>
<p class="loading-text">Loading Content</p>
<p class="loading-subtext">Fetching your media and links...</p>
</div>

<!-- Error State -->
<div class="error-container d-none" id="errorSection">
<div class="error-icon">
<i class="fas fa-exclamation-triangle"></i>
</div>
<h3 class="error-title">Failed to Load Content</h3>
<p class="error-message" id="errorMessage">Please check your setup and try again.</p>
<div class="error-btns">
<button class="btn error-btn btn-retry" onclick="location.reload()">
<i class="fas fa-redo"></i> Retry
</button>
<button class="btn error-btn btn-guide" data-bs-toggle="modal" data-bs-target="#setupModal">
<i class="fas fa-question-circle"></i> Setup Guide
</button>
</div>
</div>

<!-- Empty State -->
<div class="empty-state d-none" id="emptySection">
<div class="empty-icon">
<i class="fas fa-folder-open"></i>
</div>
<h3 class="empty-title">No Content Yet</h3>
<p class="empty-subtitle">Add your first image or link to get started.</p>
<button class="empty-btn" data-bs-toggle="modal" data-bs-target="#addLinkModal">
<i class="fas fa-plus-circle"></i> Add First Item
</button>
</div>

<!-- Media Grid -->
<div class="media-grid d-none" id="mediaGrid">
<!-- Content will be inserted here dynamically -->
</div>
</div>

<!-- Floating Action Button -->
<div class="fab-container">
<button class="fab-btn" data-bs-toggle="modal" data-bs-target="#addLinkModal" title="Add New Item">
<span class="fab-tooltip">Add Item</span>
<i class="fas fa-plus"></i>
</button>
</div>

<!-- Image Preview Modal -->
<div class="image-modal" id="imageModal">
<div class="image-modal-content">
<img src="" alt="Image Preview" class="image-modal-img" id="modalImage" onerror="this.src='https://via.placeholder.com/800x600?text=Image+Not+Available'">
<button class="image-modal-close" id="closeImageModal">
<i class="fas fa-times"></i>
</button>
<div class="image-modal-info">
<div class="image-modal-title" id="modalTitle">Image Title</div>
<div class="image-modal-description" id="modalDescription">Image description</div>
</div>
</div>
</div>

<!-- Add Item Modal -->
<div class="modal fade" id="addLinkModal" tabindex="-1" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered modal-lg">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title">
<i class="fas fa-plus-circle"></i> Add New Item
</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
<form id="dataForm">
<div class="row g-4">
<div class="col-12">
<div class="mb-3">
<label for="itemUrl" class="form-label">
<i class="fas fa-globe"></i> URL (Image or Website)
</label>
<input
type="url"
class="form-control"
id="itemUrl"
placeholder="https://example.com/image.jpg or https://website.com"
required
>
<div class="url-preview" id="urlPreview"></div>
</div>
</div>
<div class="col-12">
<div class="mb-3">
<label for="title" class="form-label">
<i class="fas fa-heading"></i> Title
</label>
<input
type="text"
class="form-control"
id="title"
placeholder="Enter a descriptive title"
required
>
</div>
</div>
<div class="col-12">
<div class="mb-3">
<label for="description" class="form-label">
<i class="fas fa-align-left"></i> Description (Optional)
</label>
<textarea
class="form-control"
id="description"
rows="3"
placeholder="Write a brief description..."
></textarea>
</div>
</div>
<div class="col-12">
<button type="submit" class="btn btn-submit" id="submitBtn">
<i class="fas fa-save"></i> <span id="buttonText">Save Item</span>
</button>
</div>
</div>
</form>
<div class="status-alert" id="statusMessage"></div>
<div class="setup-guide">
<h5><i class="fas fa-info-circle"></i> Quick Tips:</h5>
<ol>
<li>For <strong>images</strong>, use direct image URLs (ending in .jpg, .png, .gif, .webp, .bmp)</li>
<li>For <strong>websites</strong>, use regular website URLs</li>
<li>Images will show as thumbnails, websites as link cards</li>
</ol>
</div>
</div>
</div>
</div>

<!-- Setup Guide Modal -->
<div class="modal fade" id="setupModal" tabindex="-1" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered modal-lg">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title">Setup Guide</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
<h5 class="mb-4"><i class="fas fa-check-circle text-success"></i> Follow These Steps:</h5>
<ol class="text-start" style="line-height: 2;">
<li class="mb-3">
<strong>Share your Google Sheet publicly:</strong><br>
Click <strong>Share → General access → "Anyone with the link" → Viewer → Done</strong>
</li>
<li class="mb-3">
<strong>Set up your columns:</strong><br>
Create columns: <code>url</code>, <code>title</code>, <code>description</code>
</li>
<li class="mb-3">
<strong>Get your Sheet ID:</strong><br>
From browser URL: <code>https://docs.google.com/spreadsheets/d/<span class="text-primary">YOUR_ID_HERE</span>/edit</code>
</li>
<li class="mb-3">
<strong>Update this HTML file:</strong><br>
Find <code>GOOGLE_SHEET_ID = '...'</code> and replace with your ID
</li>
<li>
<strong>Add content:</strong><br>
- For images: Use direct image URLs (e.g., <code>https://example.com/photo.jpg</code>)<br>
- For links: Use website URLs (e.g., <code>https://google.com</code>)
</li>
</ol>
<div class="alert alert-info mt-4 mb-0">
<strong><i class="fas fa-lightbulb"></i> Pro Tip:</strong> Wait 1-2 minutes after making your sheet public for changes to propagate.
</div>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
// CONFIGURATION
const GOOGLE_SHEET_ID = '14e9RYeZjBoMgVTJO3I2OAdBTpIttKaCKb8NaC_pN_aY';
const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbx4FmQrmTFGcFcp4nsCmKNaZ0o2XL8Hso3_kvpVyQ5lbgA77naxcutpx4JL0BZ6xjW42A/exec';

// DOM Elements
const form = document.getElementById('dataForm');
const itemUrlInput = document.getElementById('itemUrl');
const urlPreview = document.getElementById('urlPreview');
const submitBtn = document.getElementById('submitBtn');
const buttonText = document.getElementById('buttonText');
const statusMessage = document.getElementById('statusMessage');
const loadingSection = document.getElementById('loadingSection');
const errorSection = document.getElementById('errorSection');
const emptySection = document.getElementById('emptySection');
const mediaGrid = document.getElementById('mediaGrid');
const errorMessageEl = document.getElementById('errorMessage');
const badgeTotal = document.getElementById('badgeTotal');
const badgeImages = document.getElementById('badgeImages');
const badgeLinks = document.getElementById('badgeLinks');
const tabButtons = document.querySelectorAll('.tab-btn');
const searchInput = document.getElementById('searchInput');
const imageModal = document.getElementById('imageModal');
const modalImage = document.getElementById('modalImage');
const modalTitle = document.getElementById('modalTitle');
const modalDescription = document.getElementById('modalDescription');
const closeImageModalBtn = document.getElementById('closeImageModal');
let allItems = [];
let currentFilter = 'all';
let currentSearchQuery = '';

// Event Listeners
itemUrlInput.addEventListener('input', function() {
const url = this.value.trim();
if (url) {
urlPreview.textContent = url;
urlPreview.classList.add('show');
} else {
urlPreview.classList.remove('show');
}
});

form.addEventListener('submit', async function(e) {
e.preventDefault();
const itemUrl = itemUrlInput.value.trim();
const title = document.getElementById('title').value.trim();
const description = document.getElementById('description').value.trim();

if (!itemUrl || !title) {
showStatus('⚠️ Please fill in URL and Title fields.', 'alert-danger');
return;
}

try {
new URL(itemUrl);
} catch (e) {
showStatus('⚠️ Please enter a valid URL.', 'alert-danger');
return;
}

submitBtn.disabled = true;
buttonText.innerHTML = '<span class="spinner-border spinner-border-sm"></span> Saving...';
statusMessage.style.display = 'none';

try {
const formData = new FormData();
formData.append('link_url', itemUrl);
formData.append('title', title);
formData.append('description', description);

const response = await fetch(GOOGLE_SCRIPT_URL, {
method: 'POST',
mode: 'cors',
body: formData
});

let result;
const contentType = response.headers.get('content-type');
if (contentType && contentType.includes('application/json')) {
result = await response.json();
} else {
const text = await response.text();
try {
result = JSON.parse(text);
} catch {
result = { status: response.ok ? 'success' : 'error', message: text };
}
}

if (response.ok && (result.status === 'success' || result.status === 'ok')) {
showStatus('✅ Item successfully added! Refreshing...', 'alert-success');
form.reset();
urlPreview.classList.remove('show');
setTimeout(() => {
bootstrap.Modal.getInstance(document.getElementById('addLinkModal')).hide();
loadItems();
}, 1500);
} else {
const errorMsg = result.message || 'Unknown error occurred';
showStatus(`❌ ${errorMsg}`, 'alert-danger');
}
} catch (error) {
console.error('Error details:', error);
let errorMsg = 'Failed to save item. ';
if (error.message.includes('Failed to fetch')) {
errorMsg += 'Cannot connect to Google Script.';
} else {
errorMsg += error.message;
}
showStatus(`❌ ${errorMsg}`, 'alert-danger');
} finally {
submitBtn.disabled = false;
buttonText.innerHTML = '<i class="fas fa-save"></i> Save Item';
}
});

function showStatus(message, type) {
statusMessage.innerHTML = message;
statusMessage.className = `status-alert alert ${type}`;
statusMessage.style.display = 'block';
if (type === 'alert-success') {
setTimeout(() => { statusMessage.style.display = 'none'; }, 5000);
}
}

async function loadItems() {
loadingSection.classList.remove('d-none');
errorSection.classList.add('d-none');
emptySection.classList.add('d-none');
mediaGrid.classList.add('d-none');

if (!GOOGLE_SHEET_ID || GOOGLE_SHEET_ID === 'YOUR_GOOGLE_SHEET_ID_HERE') {
showError('Please update GOOGLE_SHEET_ID in the script!');
loadingSection.classList.add('d-none');
return;
}

const sheetUrl = `https://docs.google.com/spreadsheets/d/${GOOGLE_SHEET_ID}/export?format=csv`;

try {
const response = await fetch(sheetUrl);
if (!response.ok) {
throw new Error(`HTTP ${response.status}: ${response.statusText}`);
}
const csvText = await response.text();
allItems = parseCSV(csvText);

if (allItems.length === 0) {
showEmptyState();
} else {
renderItems(allItems);
updateStats(allItems);
}
} catch (error) {
console.error('Error loading items:', error);
showError(`Failed to load content: ${error.message}<br><br>
<strong>Common Fixes:</strong><br>
1. Make sure your Google Sheet is shared publicly<br>
2. Wait 1-2 minutes after making sheet public<br>
3. Verify your Sheet ID is correct`);
}
}

function parseCSV(csv) {
const lines = csv.split('\n').filter(line => line.trim());
if (lines.length < 2) return [];

const headers = lines[0].split(',').map(header => 
header.trim().replace(/^"|"$/g, '').toLowerCase()
);

const urlIndex = headers.findIndex(h => /url|link|website|href|image/i.test(h));
const titleIndex = headers.findIndex(h => /title|name|heading/i.test(h));
const descIndex = headers.findIndex(h => /description|desc|details|summary/i.test(h));

if (urlIndex === -1) {
console.error('No URL column found. Headers:', headers);
return [];
}

const items = [];
for (let i = 1; i < lines.length; i++) {
if (!lines[i].trim()) continue;
  
const fields = lines[i].match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g) || [];
if (fields.length <= urlIndex) continue;

const cleanField = (field) => field.trim().replace(/^"|"$/g, '');
const url = cleanField(fields[urlIndex]);
if (!url || !url.match(/^https?:\/\//i)) continue;

const isImage = url.match(/\.(jpg|jpeg|png|gif|webp|bmp|svg)$/i) !== null;

items.push({
url: url,
title: titleIndex !== -1 && fields[titleIndex] ? cleanField(fields[titleIndex]) : `Item ${i}`,
description: descIndex !== -1 && fields[descIndex] ? cleanField(fields[descIndex]) : '',
isImage: isImage
});
}
return items;
}

function renderItems(items) {
loadingSection.classList.add('d-none');
errorSection.classList.add('d-none');
emptySection.classList.add('d-none');
mediaGrid.classList.remove('d-none');
mediaGrid.innerHTML = '';

let filteredItems = items;
if (currentFilter === 'images') {
filteredItems = items.filter(item => item.isImage);
} else if (currentFilter === 'links') {
filteredItems = items.filter(item => !item.isImage);
}

const query = currentSearchQuery.trim().toLowerCase();
if (query) {
filteredItems = filteredItems.filter(item =>
item.url.toLowerCase().includes(query) ||
item.title.toLowerCase().includes(query) ||
item.description.toLowerCase().includes(query)
);
}

if (filteredItems.length === 0) {
showEmptyState();
return;
}

filteredItems.forEach(item => {
if (item.isImage) {
renderImageCard(item);
} else {
renderLinkCard(item);
}
});
}

// IMAGE CARD: EXACTLY AS BEFORE
function renderImageCard(item) {
const card = document.createElement('div');
card.className = 'image-card';
card.innerHTML = `
<img src="${escapeHtml(item.url)}" alt="${escapeHtml(item.title)}" class="image-thumbnail" onerror="this.onerror=null; this.src='https://via.placeholder.com/300x200/6366f1/ffffff?text=Image+Not+Found'">
<div class="image-card-content">
<h3 class="image-card-title">${escapeHtml(item.title)}</h3>
<p class="image-card-description">${escapeHtml(item.description || 'No description')}</p>
<div class="image-card-footer">
<div class="image-card-meta">
<i class="fas fa-image"></i>
<span>Image</span>
</div>
<div class="image-card-actions">
<button class="action-btn view-btn" title="View Full Size">
<i class="fas fa-expand"></i>
</button>
<a href="${escapeHtml(item.url)}" target="_blank" class="action-btn download-btn" title="Open Image">
<i class="fas fa-download"></i>
</a>
</div>
</div>
</div>
`;

card.addEventListener('click', (e) => {
if (e.target.closest('.action-btn') || e.target.closest('a')) return;
showImageModal(item);
});

card.querySelector('.view-btn').addEventListener('click', (e) => {
e.stopPropagation();
showImageModal(item);
});

mediaGrid.appendChild(card);
}

// LINK CARD: REDESIGNED TO EMPHASIZE TITLE & DESCRIPTION
function renderLinkCard(item) {
const thumbUrl = `https://mini.s-shot.ru/300x200/JPEG/?${encodeURIComponent(item.url)}`;

const card = document.createElement('div');
card.className = 'link-card';
card.innerHTML = `
<div class="link-card-thumb">
  <img src="${escapeHtml(thumbUrl)}" alt="Preview of ${escapeHtml(item.title)}" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
  <div class="fallback-icon">${getDomainIcon(item.url)}</div>
</div>
<div class="link-card-content">
  <h3 class="link-card-title">${escapeHtml(item.title)}</h3>
  <a href="${escapeHtml(item.url)}" target="_blank" class="link-card-url">${getDomainFromUrl(item.url)}</a>
  <p class="link-card-description">${escapeHtml(item.description || 'No description available')}</p>
  <div class="link-card-footer">
    <div class="link-card-meta">
      <i class="fas fa-link"></i>
      <span>Website Link</span>
    </div>
    <a href="${escapeHtml(item.url)}" target="_blank" class="action-btn">
      <i class="fas fa-external-link-alt"></i>
    </a>
  </div>
</div>
`;

card.addEventListener('click', (e) => {
if (e.target.tagName === 'A' || e.target.closest('a') || e.target.closest('.action-btn')) return;
window.open(item.url, '_blank', 'noopener,noreferrer');
});

mediaGrid.appendChild(card);
}

function showImageModal(item) {
modalImage.src = item.url;
modalTitle.textContent = item.title;
modalDescription.textContent = item.description || 'No description available';
  
setTimeout(() => {
imageModal.classList.add('active');
document.body.style.overflow = 'hidden';
}, 50);
}

function closeImageModal() {
imageModal.classList.remove('active');
document.body.style.overflow = '';
}

closeImageModalBtn.addEventListener('click', closeImageModal);
imageModal.addEventListener('click', (e) => {
if (e.target === imageModal) closeImageModal();
});
document.addEventListener('keydown', (e) => {
if (e.key === 'Escape' && imageModal.classList.contains('active')) {
closeImageModal();
}
});
document.addEventListener('dragstart', (e) => {
if (e.target.tagName === 'IMG' && imageModal.classList.contains('active')) {
e.preventDefault();
}
});

tabButtons.forEach(btn => {
btn.addEventListener('click', () => {
tabButtons.forEach(b => b.classList.remove('active'));
btn.classList.add('active');
currentFilter = btn.dataset.filter;
renderItems(allItems);
});
});

searchInput.addEventListener('input', () => {
currentSearchQuery = searchInput.value;
renderItems(allItems);
});

function showEmptyState() {
loadingSection.classList.add('d-none');
errorSection.classList.add('d-none');
mediaGrid.classList.add('d-none');
emptySection.classList.remove('d-none');
}

function showError(message) {
loadingSection.classList.add('d-none');
emptySection.classList.add('d-none');
mediaGrid.classList.add('d-none');
errorSection.classList.remove('d-none');
errorMessageEl.innerHTML = message;
}

function updateStats(items) {
const images = items.filter(item => item.isImage).length;
const links = items.filter(item => !item.isImage).length;
const total = items.length;

badgeTotal.textContent = total;
badgeImages.textContent = images;
badgeLinks.textContent = links;
}

function getDomainFromUrl(url) {
try {
return new URL(url).hostname.replace('www.', '').replace('m.', '');
} catch (e) {
return 'website';
}
}

function getDomainIcon(url) {
const domain = getDomainFromUrl(url);
const icons = {
'youtube.com': '<i class="fab fa-youtube" style="color:#ff0000"></i>',
'facebook.com': '<i class="fab fa-facebook-f" style="color:#1877f2"></i>',
'twitter.com': '<i class="fab fa-twitter" style="color:#1da1f2"></i>',
'instagram.com': '<i class="fab fa-instagram" style="color:#e1306c"></i>',
'linkedin.com': '<i class="fab fa-linkedin-in" style="color:#0a66c2"></i>',
'github.com': '<i class="fab fa-github" style="color:#333"></i>',
'google.com': '<i class="fab fa-google" style="color:#4285f4"></i>',
'amazon.com': '<i class="fab fa-amazon" style="color:#ff9900"></i>',
'reddit.com': '<i class="fab fa-reddit-alien" style="color:#ff4500"></i>',
'medium.com': '<i class="fab fa-medium-m" style="color:#00ab6c"></i>',
'whatsapp.com': '<i class="fab fa-whatsapp" style="color:#25d366"></i>',
'telegram.org': '<i class="fab fa-telegram-plane" style="color:#0088cc"></i>',
'tiktok.com': '<i class="fab fa-tiktok" style="color:#000"></i>',
'pinterest.com': '<i class="fab fa-pinterest-p" style="color:#bd081c"></i>',
'discord.com': '<i class="fab fa-discord" style="color:#5865f2"></i>',
'spotify.com': '<i class="fab fa-spotify" style="color:#1db954"></i>',
'paypal.com': '<i class="fab fa-paypal" style="color:#00457c"></i>',
'dropbox.com': '<i class="fab fa-dropbox" style="color:#0061ff"></i>',
'apple.com': '<i class="fab fa-apple" style="color:#000"></i>',
'microsoft.com': '<i class="fab fa-microsoft" style="color:#f65314"></i>'
};
return icons[domain] || '<i class="fas fa-globe" style="color:#6366f1"></i>';
}

function escapeHtml(text) {
if (!text) return '';
const div = document.createElement('div');
div.textContent = text;
return div.innerHTML;
}

document.addEventListener('DOMContentLoaded', () => {
if (!document.referrerPolicy) document.referrerPolicy = "strict-origin-when-cross-origin";
setTimeout(loadItems, 300);
});
</script>
</body>
</html>
